(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"6gIf":function(e,t,a){"use strict";a.r(t);a("g9YV");var n,o,c,r=a("wCAj"),i=(a("2qtc"),a("kLXV")),s=a("2Taf"),l=a.n(s),d=a("vZ4D"),p=a.n(d),u=a("l4Ni"),h=a.n(u),m=a("ujKo"),y=a.n(m),w=a("MhPg"),g=a.n(w),f=a("q1tI"),D=a.n(f),S=a("MuoO"),v=a("7DNP"),C=a("wd/R"),I=a.n(C),z=a("sgIW"),k=a("AztY"),b=a("zHco"),L=(n=Object(S["connect"])(function(e){var t=e.receipt,a=e.common;return{receipt:t,common:a}}),n((c=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return a=h()(this,(e=y()(t)).call.apply(e,[this].concat(o))),a.state={selectedData:[],selectedRowKeys:[],disableDownload:!0,searchData:{},current:1,pageSize:20},a.handleSearchForm=function(e){var t=e.companyId,n=e.rangedate,o=a.state.pageSize,c={companyId:t,startDate:n?n[0]:"",endDate:n?n[1]:"",size:o,startPage:1};a.setState({searchData:e,selectedRowKeys:[],current:1}),a.queryList(c)},a.handleChangePage=function(e,t){var n=a.state.searchData,o=n.companyId,c=n.rangedate,r={startPage:e,size:t,companyId:o,startDate:c?c[0]:"",endDate:c?c[1]:""};a.setState({current:e}),a.queryList(r)},a.onShowSizeChange=function(e,t){var n=a.state.searchData,o=n.companyId,c=n.rangedate;a.setState({current:1,pageSize:t});var r={startPage:1,size:t,companyId:o,startDate:c?c[0]:"",endDate:c?c[1]:""};a.queryList(r)},a.handleDownload=function(){var e=a.state.selectedData;Object(k["a"])(e).then(function(e){e.success&&i["a"].confirm({title:"\u63d0\u793a",content:"\u5df2\u6dfb\u52a0\u5230\u4e0b\u8f7d\u961f\u5217\uff0c\u8bf7\u524d\u5f80\u4e0b\u8f7d\u7ba1\u7406\u9875\u9762\u67e5\u770b\u3002",okText:"\u524d\u5f80\u67e5\u770b",onOk:function(){var e=a.props.dispatch;e(v["routerRedux"].push("/finance/receipt/download"))},cancelText:"\u53d6\u6d88",onCancel:function(){}})})},a.handleGoDownload=function(){var e=a.props.dispatch;e(v["routerRedux"].push("/finance/receipt/download"))},a.queryList=function(e){var t=a.props.dispatch;t({type:"receipt/fetchList",payload:e})},a.changeRowSelection=function(e,t){a.setState({selectedData:t,disableDownload:0===t.length,selectedRowKeys:e})},a}return g()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"common/fetchCompanyList"}),this.queryList()}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"receipt/clear"})}},{key:"render",value:function(){var e=this.props,t=e.receipt,a=t.receiptList,n=t.total,o=e.common.companyList,c=this.state,i=c.disableDownload,s=c.current,l=c.pageSize,d=c.selectedRowKeys,p={showQuickJumper:!0,pageSize:l,total:n,current:s,showTotal:function(){return"\u5f53\u524d\u9875".concat(a.length,"\u6761\u6570\u636e\uff0c\u5171").concat(n,"\u6761")},showSizeChanger:!0,onChange:this.handleChangePage,onShowSizeChange:this.onShowSizeChange},u=[{title:"\u53d1\u8d77\u65b9",dataIndex:"paymentCompanyName"},{title:"\u63a5\u6536\u65b9",dataIndex:"payeeCompanyName"},{title:"\u91d1\u989d",dataIndex:"amount"},{title:"\u65f6\u95f4",dataIndex:"tradeDate",render:function(e){return D.a.createElement("span",null,e?I()(e).format("YYYY.MM.DD HH:mm:ss"):"")}}],h={selectedRowKeys:d,onChange:this.changeRowSelection},m=[{onSearch:this.handleSearchForm},{onDownload:this.handleDownload,disabled:i},{text:"\u4e0b\u8f7d\u7ba1\u7406",onClick:this.handleGoDownload}];return D.a.createElement(b["a"],null,D.a.createElement("div",null,D.a.createElement(z["a"],{data:[{label:"\u4f01\u4e1a\u540d\u79f0",type:"select",options:o,key:"companyId",placeholder:"\u8bf7\u9009\u62e9\u4f01\u4e1a",showSearch:!0},{label:"\u65f6\u95f4\u8303\u56f4",type:"rangepicker",key:"rangedate"}],buttonGroup:m})),D.a.createElement(r["a"],{rowSelection:h,columns:u,dataSource:a,pagination:p,rowKey:function(e){return e.tradeId}}))}}]),t}(f["Component"]),o=c))||o);t["default"]=L}}]);